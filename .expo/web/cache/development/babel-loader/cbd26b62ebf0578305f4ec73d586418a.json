{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/stinenorklitlonborg/Desktop/projekt/brugerinddragelse/components/Feed.js\";\n\nimport * as React from 'react';\nimport { useState, useEffect } from 'react';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport firebase from \"firebase\";\nimport { Card } from \"react-native-paper\";\nimport SignUpForm from \"./SignUpForm\";\nimport LoginForm from \"./LoginForm\";\n\nvar Feed = function Feed(_ref) {\n  var navigation = _ref.navigation;\n\n  if (!firebase.auth().currentUser) {\n    var _useState = useState({\n      loggedIn: false\n    }),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1];\n\n    function onAuthStateChange(callback) {\n      return firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          callback({\n            loggedIn: true,\n            user: user\n          });\n        } else {\n          callback({\n            loggedIn: false\n          });\n        }\n      });\n    }\n\n    useEffect(function () {\n      var unsubscribe = onAuthStateChange(setUser);\n      return function () {\n        unsubscribe();\n      };\n    }, []);\n    return React.createElement(ScrollView, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }, React.createElement(Image, {\n      source: require(\"../assets/feedPic.jpeg\"),\n      style: styles.image,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }), React.createElement(Text, {\n      style: styles.paragraph,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }, \"Opret eller Login for at se hvor dine venner har spist for nylig!\"), React.createElement(Card, {\n      style: {\n        padding: 20\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, React.createElement(SignUpForm, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }\n    })), React.createElement(Card, {\n      style: {\n        padding: 20\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, React.createElement(LoginForm, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }\n    })), React.createElement(Text, {\n      style: styles.paragraph2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }, \"Tekst der skaber lidt plads til login-knap 10hi\"));\n  }\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      ratings = _useState4[0],\n      setRatings = _useState4[1];\n\n  useEffect(function () {\n    if (!ratings) firebase.database().ref('/Ratings').on('value', function (snapshot) {\n      setRatings(snapshot.val());\n    });\n  }, []);\n\n  if (!ratings) {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, React.createElement(Image, {\n      source: require(\"../assets/welcomePic.jpeg\"),\n      style: styles.image,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, \"No posts found :(\"), React.createElement(TouchableOpacity, {\n      style: styles.container,\n      onPress: function onPress() {\n        var rating = null;\n        navigation.navigate('Add Rating', rating);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }, \"Press here to rate a venue\")), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, \"Current user: \", firebase.auth().currentUser.email), React.createElement(Button, {\n      onPress: function onPress() {\n        return handleLogOut();\n      },\n      title: \"Log out\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  var handleSelectRating = function handleSelectRating(id) {\n    var rating = Object.entries(ratings).find(function (rating) {\n      return rating[0] === id;\n    });\n    navigation.navigate('Ratings Details', {\n      rating: rating\n    });\n  };\n\n  var ratingsArray = Object.values(ratings);\n  var ratingsKeys = Object.keys(ratings);\n  return React.createElement(FlatList, {\n    data: ratingsArray,\n    keyExtractor: function keyExtractor(item, index) {\n      return ratingsKeys[index];\n    },\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item,\n          index = _ref2.index;\n      return React.createElement(TouchableOpacity, {\n        style: styles.container,\n        onPress: function onPress() {\n          return handleSelectRating(ratingsKeys[index]);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }\n      }, item.Sted, \", \", item.Maden));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default Feed;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    borderWidth: 1,\n    borderRadius: 10,\n    marginTop: \"5%\",\n    padding: 5,\n    height: 50,\n    justifyContent: 'center'\n  },\n  label: {\n    fontWeight: 'bold'\n  },\n  image: {\n    marginHorizontal: \"10%\",\n    marginTop: \"10%\",\n    width: \"80%\",\n    height: \"25%\"\n  },\n  paragraph: {\n    margin: '5%',\n    fontSize: 18,\n    fontWeight: 'bold',\n    textAlign: 'center'\n  },\n  paragraph2: {\n    marginTop: '50%',\n    fontSize: 18,\n    fontWeight: 'bold',\n    textAlign: 'center'\n  }\n});","map":{"version":3,"sources":["/Users/stinenorklitlonborg/Desktop/projekt/brugerinddragelse/components/Feed.js"],"names":["React","useState","useEffect","firebase","Card","SignUpForm","LoginForm","Feed","navigation","auth","currentUser","loggedIn","user","setUser","onAuthStateChange","callback","onAuthStateChanged","unsubscribe","require","styles","image","paragraph","padding","paragraph2","ratings","setRatings","database","ref","on","snapshot","val","container","rating","navigate","email","handleLogOut","handleSelectRating","id","Object","entries","find","ratingsArray","values","ratingsKeys","keys","item","index","Sted","Maden","StyleSheet","create","flex","borderWidth","borderRadius","marginTop","height","justifyContent","label","fontWeight","marginHorizontal","width","margin","fontSize","textAlign"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {useState, useEffect} from 'react';\nimport {\n    Button,\n    FlatList,\n    Text,\n    View,\n    StyleSheet,\n    TouchableOpacity, Image, ScrollView,\n} from 'react-native';\nimport firebase from \"firebase\";\nimport {Card} from \"react-native-paper\";\nimport SignUpForm from \"./SignUpForm\";\nimport LoginForm from \"./LoginForm\";\n\nconst Feed = ({navigation}) => {\n\n\n    //Hvis der af en eller anden grund ikke skulle være muligt at fremfinde den aktive bruger,\n    //skal der udprintes en besked om dette igennem en tekstkomponent\n    if (!firebase.auth().currentUser) {\n\n        //Her oprettes bruger state variablen\n        const [user, setUser] = useState({loggedIn: false});\n\n        //onAuthstatechanged er en prædefineret metode, forsynet af firebase, som konstant observerer brugerens status (logget ind vs logget ud)\n        //Pba. brugerens status foretages et callback i form af setUSer metoden, som håndterer user-state variablens status.\n        function onAuthStateChange(callback) {\n            return firebase.auth().onAuthStateChanged(user => {\n                if (user) {\n                    callback({loggedIn: true, user: user});\n                } else {\n                    callback({loggedIn: false});\n                }\n            });\n        }\n\n        //Heri aktiverer vi vores listener i form af onAuthStateChanged, så vi dynamisk observerer om brugeren er aktiv eller ej.\n        useEffect(() => {\n            const unsubscribe = onAuthStateChange(setUser);\n            return () => {\n                unsubscribe();\n            };\n        }, []);\n\n\n        return (\n            <ScrollView>\n                <Image\n                    source={require('../assets/feedPic.jpeg')}\n                    style={styles.image}/>\n\n                <Text style={styles.paragraph}>\n                    Opret eller Login for at se hvor dine venner har spist for nylig!\n                </Text>\n\n                <Card style={{padding:20}}>\n                    <SignUpForm />\n                </Card>\n\n                <Card style={{padding:20}}>\n                    <LoginForm />\n                </Card>\n                <Text style={styles.paragraph2}>\n                    Tekst der skaber lidt plads til login-knap 10hi\n                </Text>\n            </ScrollView>\n        );\n    }\n\n\n    const [ratings, setRatings] = useState('');\n\n\n    useEffect(() =>{\n        if(!ratings)\n            firebase\n                .database()\n                .ref('/Ratings')\n                .on('value', snapshot => {\n                    setRatings(snapshot.val())\n                });\n    },[]);\n\n    // Vi viser ingenting hvis der ikke er data\n    if (!ratings) {\n\n        return (\n            <View>\n                <Image\n                    source={require('../assets/welcomePic.jpeg')}\n                    style={styles.image}/>\n                <Text>\n                    No posts found :(\n                </Text>\n                <TouchableOpacity style={styles.container} onPress={() => {\n                    const rating = null\n                    navigation.navigate('Add Rating', rating)\n                }}>\n                    <Text>\n                        Press here to rate a venue\n                    </Text>\n                </TouchableOpacity>\n                <Text>Current user: {firebase.auth().currentUser.email}</Text>\n                <Button onPress={() => handleLogOut()} title=\"Log out\" />\n            </View>\n\n        );\n    }\n\n    const handleSelectRating = id => {\n        /*Her søger vi direkte i vores array af biler og finder bil objektet som matcher idet vi har tilsendt*/\n        const rating = Object.entries(ratings).find(rating => rating[0] === id /*id*/)\n        navigation.navigate('Ratings Details', {rating});\n    }\n\n    // Flatlist forventer et array. Derfor tager vi alle values fra vores cars objekt, og bruger som array til listen\n    const ratingsArray = Object.values(ratings);\n    const ratingsKeys = Object.keys(ratings);\n\n    return (\n        <FlatList\n            data={ratingsArray}\n            // Vi bruger ratingsKeys til at finde ID på den aktuelle bil og returnerer dette som key\n            keyExtractor={(item, index) => ratingsKeys[index]}\n            renderItem={({item,index}) => { return(\n                <TouchableOpacity style={styles.container} onPress={() => handleSelectRating(ratingsKeys[index])}>\n                    <Text>\n                        {\n        //Måske vi skulle lave et gennemsnit af mad, service, atmosfære og value for money i stedet for bare maden\n                        }\n                        {item.Sted}, {item.Maden}\n                    </Text>\n                </TouchableOpacity>\n            ) } }\n        >\n        </FlatList>\n    )\n}\n\nexport default Feed;\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        borderWidth: 1,\n        borderRadius:10,\n        marginTop: \"5%\",\n        padding: 5,\n        height: 50,\n        justifyContent:'center'\n    },\n    label: { fontWeight: 'bold' },\n    image: {\n        marginHorizontal: \"10%\",\n        marginTop: \"10%\",\n        width: \"80%\",\n        height: \"25%\",\n    },\n    paragraph: {\n        margin: '5%',\n        fontSize: 18,\n        fontWeight: 'bold',\n        textAlign: 'center',\n    },\n    paragraph2: {\n        marginTop: '50%',\n        fontSize: 18,\n        fontWeight: 'bold',\n        textAlign: 'center',\n    },\n});"]},"metadata":{},"sourceType":"module"}